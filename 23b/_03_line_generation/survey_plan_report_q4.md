# 第四问测线规划报告

本文档详细说明了针对第四问中7个子区域进行测线规划的方法、过程和结果。

## 方法论

我们严格遵循了 `4solution.md` 中提出的高级迭代算法。该方法的核心思想是将第三问中针对单一坡向的迭代算法推广到复杂地形。主要步骤如下：

1.  **局部坐标系作业**：对每个子区域，我们在其主测线方向 `u` 和坡向 `v` 构成的局部坐标系下进行规划。
2.  **动态水深计算**：测线间距严重依赖于当前水深。我们通过对 `output.csv` 中的原始格网数据建立一个`LinearNDInterpolator` (线性插值器)，实现了在迭代过程中动态、精确地计算任意一条测线上的平均水深。
3.  **迭代布线**：从每个区域的坡向起始边界 `v_min` 开始，我们使用第三问的迭代公式计算到下一条测线的距离 `d_k`。该公式的输入是上一步动态计算的平均水深 `D_k`、区域的平均坡度 `α_k` 以及10%的目标重叠率。持续迭代，直到测线覆盖范围超过 `v_max`。

## 结果汇总

|   区域编号 |   测线数量 |   总长度 (海里) |   总长度 (公里) |
|-----------:|-----------:|----------------:|----------------:|
|       0.00 |      63.00 |           69.04 |          127.85 |
|       1.00 |      22.00 |           56.16 |          104.01 |
|       2.00 |      32.00 |           73.07 |          135.33 |
|       3.00 |      15.00 |           39.55 |           73.24 |
|       4.00 |      11.00 |           29.55 |           54.74 |
|       5.00 |      22.00 |           56.62 |          104.85 |
|       6.00 |      17.00 |           45.55 |           84.36 |

**所有区域测线总长度为: 369.54 海里 (684.38 公里)。**

测线规划的可视化结果如下图所示，详细数据已存入 `survey_lines_q4.csv`。

![测线规划结果](survey_plan_q4.png)
