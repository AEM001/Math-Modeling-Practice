# 问题2 数据文件说明（精简版）

目录：/Users/Mac/Downloads/Math-Modeling-Practice/23C/2

本目录包含为“问题二：蔬菜品类的定价与补货策略”准备的精简输出，仅保留建模所需的核心 CSV 与优化版 Excel，便于查看与分析。

## 一、文件一览（仅保留两类输出）

1) category_daily_sales.csv（CSV，核心数据）
- 含义：品类-日级别的聚合数据，用于建模与分析。
- 记录数：6474（覆盖 2020-07-01 至 2023-06-30）
- 字段：
  - 销售日期、分类编码、分类名称
  - 销售总量_kg、平均销售单价、平均批发价格、平均加成率、平均损耗率、打折销售比例
  - 销售额(元)、成本额(元)、毛利(元)
  - 补货量_kg（按平均损耗率反推）
  - 年、月、日、星期、是否周末

2) problem2_data_optimized.xlsx（Excel，查看与汇总）
- 说明：用于在 Excel 中快速查看与汇总，包含以下工作表：
  - 数据概览：数据集统计与各品类总览（记录数、时间范围、品类数、品类销量与加成率概览）
  - 品类日销量_聚合：与 CSV 一致的完整聚合数据
  - 销售明细_样本：按品类分层采样的销售明细（仅用于人工查看，非完整明细）
  - 最近30天数据：截至数据末日的近30天品类-日数据

> 注：原始的完整明细 Excel 已不再保留，仅保留必要的聚合数据与可视化友好的优化版 Excel。

## 二、数据来源与处理要点（概要）
- 数据来源：
  - 附件1：商品信息（映射品类）
  - 附件2：销售流水（清洗：正价、正销量、有效日期）
  - 附件3：批发价格（按日合并，不足用同SKU近7天前向填充）
  - 附件4：损耗率（优先单品，其次小分类，最后均值兜底）
- 指标计算：
  - 加成率 = (销售单价 - 批发价) / 批发价
  - 销售额 = 销量 × 销售单价；成本额 = 销量 × 批发价；毛利 = 销售额 − 成本额
  - 补货量_kg = 销售总量_kg / (1 − 平均损耗率)

## 三、如何复现与更新
- 脚本：/Users/Mac/Downloads/Math-Modeling-Practice/23C/2/problem2_prepare_optimized.py
- 运行：
```bash
python /Users/Mac/Downloads/Math-Modeling-Practice/23C/2/problem2_prepare_optimized.py
```
- 输出：
  - /Users/Mac/Downloads/Math-Modeling-Practice/23C/2/category_daily_sales.csv
  - /Users/Mac/Downloads/Math-Modeling-Practice/23C/2/problem2_data_optimized.xlsx

## 四、使用建议
- 建模与数据分析：优先使用 category_daily_sales.csv（轻量、结构化）
- Excel 查看与汇报：使用 problem2_data_optimized.xlsx（含概览与近30天数据）
- 对异常值（如极端加成率）可采用稳健处理（如中位数、分位数截断）

如需更多字段说明或扩展输出，请告知。